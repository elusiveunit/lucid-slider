/*!
 * Lucid Slider
 * 
 * Slider edit screen
 */
var lucidSliderEditScreen=function(b){function f(e){if("undefined"!==typeof e){var c=e.find(a.selector.thumbnail),g=e.find(a.selector.thumbnailId),f=c.find(a.selector.thumbnailUrl),h=e.find(a.selector.url),j=c.find("img"),d;d||(d=wp.media.frames.lucidSliderFrame=wp.media({title:b(this).data("uploader-title"),button:{text:b(this).data("uploader-button-text")},multiple:!1}),d.on("select",function(){var a=d.state().get("selection").first().toJSON(),b=a.url,b=b.split(".");b[b.length-2]+="-120x80";b=b.join(".");
g.val(a.id);h.val(a.filename);f.val(b);j.attr("src",b)}));d.open()}}var a={$slides:b("#lsjl-slides"),$templates:b("#lsjl-slider-template"),$templateInputs:null,$extraFields:b(".lsjl-extra-fields"),$firstWrap:b(".wpa_group-slide-group.first .lsjl-fields-wrap"),$firstWrapInner:null,fieldsCount:0,sortableSettings:{handle:".lsjl-move-handle",tolerance:"pointer",placeholder:"lsjl-placeholder",forcePlaceholderSize:!0,stop:function(){b("#lsjl-sort-message").css({display:"block"})}},selector:{thumbnail:".lsjl-slide-thumbnail",
thumbnailId:".lsjl-slide-thumbnail-id",thumbnailUrl:".lsjl-slide-thumbnail-field",url:".lsjl-slide-url-field"}};return{settings:a,init:function(){a.fieldsCount=a.$extraFields[0].children.length;a.$templateInputs=a.$templates.find('input[type="radio"]');a.$slides.on("click",".lsjl-upload",function(a){a.preventDefault();f(b(this).parents(".wpa_group-slide-group"))});a.$slides.on("click",".lsjl-expand-group",function(a){a.preventDefault();var c=b(this).prev();c.toggleClass(function(){var a=c.next();
c.hasClass("expanded")?a.text(a.data("show-text")):a.text(a.data("hide-text"));return"expanded"})});a.$templates.on("click","input",function(){a.$templateInputs.each(function(){b(this).parent().removeClass("selected")});b(this).parent().addClass("selected")});b("#wpa_loop-slide-group").sortable(a.sortableSettings);0<a.fieldsCount&&a.$slides.find(".lsjl-fields-wrap").addClass("expandable")}}}(jQuery,window);jQuery(document).ready(function(){lucidSliderEditScreen.init()});
