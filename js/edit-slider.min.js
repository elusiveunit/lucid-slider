/*! Lucid Slider - Slider edit screen | build 2013-04-08 */
var lucidSliderEditScreen=function(e){"use strict";function t(){a.fieldsCount=a.$extraFields[0].children.length,a.$templateInputs=a.$templates.find('input[type="radio"]'),l(),s()}function l(){a.$slides.on("click",".lsjl-upload",function(t){t.preventDefault(),i(e(this).parents(".wpa_group-slide-group"),this)}),a.$slides.on("click",".lsjl-expand-group",function(t){t.preventDefault(),n(e(this).prev())}),a.$templates.on("click","input",function(){a.$templateInputs.each(function(){e(this).parent().removeClass("selected")}),e(this).parent().addClass("selected")}),e("#wpa_loop-slide-group").sortable(a.sortableSettings)}function i(t,l){if(t!==undefined){var i,n=t.find(a.selector.thumbnail),s=t.find(a.selector.thumbnailId),d=n.find(a.selector.thumbnailUrl),r=t.find(a.selector.url),u=n.find("img");if(i)return i.open(),undefined;i=wp.media.frames.lucidSliderFrame=wp.media({title:e(l).data("uploader-title"),button:{text:e(l).data("uploader-button-text")},multiple:!1}),i.on("select",function(){var e=i.state().get("selection").first().toJSON(),t=e.url;t=t.split("."),t[t.length-2]=t[t.length-2]+"-120x80",t=t.join("."),s.val(e.id),r.val(e.filename),d.val(t),u.attr("src",t)}),i.open()}}function n(e){e.toggleClass(function(){var t=e.next();return e.hasClass("expanded")?t.text(t.data("show-text")):t.text(t.data("hide-text")),"expanded"})}function s(){a.fieldsCount>0&&a.$slides.find(".lsjl-fields-wrap").addClass("expandable")}var a={$slides:e("#lsjl-slides"),$templates:e("#lsjl-slider-template"),$templateInputs:null,$extraFields:e(".lsjl-extra-fields"),$firstWrap:e(".wpa_group-slide-group.first .lsjl-fields-wrap"),$firstWrapInner:null,fieldsCount:0,sortableSettings:{handle:".lsjl-move-handle",tolerance:"pointer",placeholder:"lsjl-placeholder",forcePlaceholderSize:!0,stop:function(){e("#lsjl-sort-message").css({display:"block"})}},selector:{thumbnail:".lsjl-slide-thumbnail",thumbnailId:".lsjl-slide-thumbnail-id",thumbnailUrl:".lsjl-slide-thumbnail-field",url:".lsjl-slide-url-field"}};return{settings:a,init:t}}(jQuery,window);jQuery(document).ready(function(){"use strict";lucidSliderEditScreen.init()});